---
AWSTemplateFormatVersion: '2010-09-09'
Description: VPC setup
Parameters: 
  AppName: 
    Type: String
    Default: TestApp
    Description: Name of your application or organization
  CidrBlock: 
    Type: String
    Default: 10.0.0.0/24
    AllowedPattern: "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/(\\d|[1-2]\\d|3[0-2]))?$"
    Description: Enter VPC network with mask like 192.168.0.0/24 or 10.0.0.0/24
Resources:
  VPC:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock:
        Ref: CidrBlock
      EnableDnsHostnames: true
      EnableDnsSupport: true
      Tags:
        - Key: Name
          Value: !Sub ${AppName}-vpc
Outputs: 
  VPC:
    Value: !Ref CidrBlock
    Description: CIDR block of VPC
    Export:
      Name: !Sub ${AppName}-vpc